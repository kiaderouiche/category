//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package document ;import (_ea "encoding/binary";_a "fmt";_ff "github.com/unidoc/unipdf/v3/common";_g "github.com/unidoc/unipdf/v3/internal/bitwise";_b "github.com/unidoc/unipdf/v3/internal/jbig2/basic";_eg "github.com/unidoc/unipdf/v3/internal/jbig2/bitmap";_de "github.com/unidoc/unipdf/v3/internal/jbig2/document/segments";_d "github.com/unidoc/unipdf/v3/internal/jbig2/encoder/classer";_bb "github.com/unidoc/unipdf/v3/internal/jbig2/errors";_af "io";_f "math";_fe "runtime/debug";);func (_bad *Document )completeSymbols ()(_ddg error ){const _ad ="\u0063o\u006dp\u006c\u0065\u0074\u0065\u0053\u0079\u006d\u0062\u006f\u006c\u0073";if _bad .Classer ==nil {return nil ;};if _bad .Classer .UndilatedTemplates ==nil {return _bb .Error (_ad ,"\u006e\u006f t\u0065\u006d\u0070l\u0061\u0074\u0065\u0073 de\u0066in\u0065\u0064\u0020\u0066\u006f\u0072\u0020th\u0065\u0020\u0063\u006c\u0061\u0073\u0073e\u0072");};_eca :=len (_bad .Pages )==1;_ade :=make ([]int ,_bad .Classer .UndilatedTemplates .Size ());var _dbf int ;for _ece :=0;_ece < _bad .Classer .ClassIDs .Size ();_ece ++{_dbf ,_ddg =_bad .Classer .ClassIDs .Get (_ece );if _ddg !=nil {return _bb .Wrap (_ddg ,_ad ,"\u0063\u006c\u0061\u0073\u0073\u0020\u0049\u0044\u0027\u0073");};_ade [_dbf ]++;};var _edc []int ;for _egc :=0;_egc < _bad .Classer .UndilatedTemplates .Size ();_egc ++{if _ade [_egc ]==0{return _bb .Error (_ad ,"\u006eo\u0020\u0073y\u006d\u0062\u006f\u006cs\u0020\u0069\u006es\u0074\u0061\u006e\u0063\u0065\u0073\u0020\u0066\u006fun\u0064\u0020\u0066o\u0072\u0020g\u0069\u0076\u0065\u006e\u0020\u0063l\u0061\u0073s\u003f\u0020");};if _ade [_egc ]> 1||_eca {_edc =append (_edc ,_egc );};};_bad ._fa =len (_edc );var _ac ,_cdc int ;for _cdce :=0;_cdce < _bad .Classer .ComponentPageNumbers .Size ();_cdce ++{_ac ,_ddg =_bad .Classer .ComponentPageNumbers .Get (_cdce );if _ddg !=nil {return _bb .Wrapf (_ddg ,_ad ,"p\u0061\u0067\u0065\u003a\u0020\u0027\u0025\u0064\u0027 \u006e\u006f\u0074\u0020\u0066\u006f\u0075nd\u0020\u0069\u006e\u0020t\u0068\u0065\u0020\u0063\u006c\u0061\u0073\u0073\u0065r \u0070\u0061g\u0065\u006e\u0075\u006d\u0062\u0065\u0072\u0073",_cdce );};_cdc ,_ddg =_bad .Classer .ClassIDs .Get (_cdce );if _ddg !=nil {return _bb .Wrapf (_ddg ,_ad ,"\u0063\u0061\u006e\u0027\u0074\u0020\u0067e\u0074\u0020\u0073y\u006d\u0062\u006f\u006c \u0066\u006f\u0072\u0020\u0070\u0061\u0067\u0065\u0020\u0027\u0025\u0064\u0027\u0020\u0066\u0072\u006f\u006d\u0020\u0063\u006c\u0061\u0073\u0073\u0065\u0072",_ac );};if _ade [_cdc ]==1&&!_eca {_bad ._cc [_ac ]=append (_bad ._cc [_ac ],_cdc );};};if _ddg =_bad .Classer .ComputeLLCorners ();_ddg !=nil {return _bb .Wrap (_ddg ,_ad ,"");};return nil ;};func (_dbd *Page )collectPageStripes ()(_fffd []_de .Segmenter ,_accd error ){const _aee ="\u0063o\u006cl\u0065\u0063\u0074\u0050\u0061g\u0065\u0053t\u0072\u0069\u0070\u0065\u0073";var _cad _de .Segmenter ;for _ ,_abc :=range _dbd .Segments {switch _abc .Type {case 6,7,22,23,38,39,42,43:_cad ,_accd =_abc .GetSegmentData ();if _accd !=nil {return nil ,_bb .Wrap (_accd ,_aee ,"");};_fffd =append (_fffd ,_cad );case 50:_cad ,_accd =_abc .GetSegmentData ();if _accd !=nil {return nil ,_accd ;};_agag ,_gff :=_cad .(*_de .EndOfStripe );if !_gff {return nil ,_bb .Errorf (_aee ,"\u0045\u006e\u0064\u004f\u0066\u0053\u0074\u0072\u0069\u0070\u0065\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u006f\u0066\u0020\u0076\u0061l\u0069\u0064\u0020\u0074\u0079p\u0065\u003a \u0027\u0025\u0054\u0027",_cad );};_fffd =append (_fffd ,_agag );_dbd .FinalHeight =_agag .LineNumber ();};};return _fffd ,nil ;};func (_dg *Document )completeClassifiedPages ()(_gb error ){const _fbf ="\u0063\u006f\u006dpl\u0065\u0074\u0065\u0043\u006c\u0061\u0073\u0073\u0069\u0066\u0069\u0065\u0064\u0050\u0061\u0067\u0065\u0073";if _dg .Classer ==nil {return nil ;};_dg ._cd =make ([]int ,_dg .Classer .UndilatedTemplates .Size ());for _gee :=0;_gee < _dg .Classer .ClassIDs .Size ();_gee ++{_dae ,_gc :=_dg .Classer .ClassIDs .Get (_gee );if _gc !=nil {return _bb .Wrapf (_gc ,_fbf ,"\u0063\u006c\u0061\u0073s \u0077\u0069\u0074\u0068\u0020\u0069\u0064\u003a\u0020\u0027\u0025\u0064\u0027",_gee );};_dg ._cd [_dae ]++;};var _egg []int ;for _dce :=0;_dce < _dg .Classer .UndilatedTemplates .Size ();_dce ++{if _dg .NumberOfPages ==1||_dg ._cd [_dce ]> 1{_egg =append (_egg ,_dce );};};var (_ecf *Page ;_eac bool ;);for _eb ,_ga :=range *_dg .Classer .ComponentPageNumbers {if _ecf ,_eac =_dg .Pages [_ga ];!_eac {return _bb .Errorf (_fbf ,"p\u0061g\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020n\u006f\u0074\u0020\u0066ou\u006e\u0064",_eb );};if _ecf .EncodingMethod ==GenericEM {_ff .Log .Error ("\u0047\u0065\u006e\u0065\u0072\u0069c\u0020\u0070\u0061g\u0065\u0020\u0077i\u0074\u0068\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u003a \u0027\u0025\u0064\u0027\u0020ma\u0070\u0070\u0065\u0064\u0020\u0061\u0073\u0020\u0063\u006c\u0061\u0073\u0073\u0069\u0066\u0069\u0065\u0064\u0020\u0070\u0061\u0067\u0065",_eb );continue ;};_dg ._ec [_ga ]=append (_dg ._ec [_ga ],_eb );_gd ,_eba :=_dg .Classer .ClassIDs .Get (_eb );if _eba !=nil {return _bb .Wrapf (_eba ,_fbf ,"\u006e\u006f\u0020\u0073uc\u0068\u0020\u0063\u006c\u0061\u0073\u0073\u0049\u0044\u003a\u0020\u0025\u0064",_eb );};if _dg ._cd [_gd ]==1&&_dg .NumberOfPages !=1{_gbe :=append (_dg ._cc [_ga ],_gd );_dg ._cc [_ga ]=_gbe ;};};if _gb =_dg .Classer .ComputeLLCorners ();_gb !=nil {return _bb .Wrap (_gb ,_fbf ,"");};if _ ,_gb =_dg .addSymbolDictionary (0,_dg .Classer .UndilatedTemplates ,_egg ,_dg ._ffa ,false );_gb !=nil {return _bb .Wrap (_gb ,_fbf ,"");};return nil ;};func (_bab *Document )mapData ()error {const _cgaa ="\u006da\u0070\u0044\u0061\u0074\u0061";var (_bfg []*_de .Header ;_egbd int64 ;_gfc _de .Type ;);_dge ,_bdf :=_bab .isFileHeaderPresent ();if _bdf !=nil {return _bb .Wrap (_bdf ,_cgaa ,"");};if _dge {if _bdf =_bab .parseFileHeader ();_bdf !=nil {return _bb .Wrap (_bdf ,_cgaa ,"");};_egbd +=int64 (_bab ._c );_bab .FullHeaders =true ;};var (_fad *Page ;_egbg bool ;);for _gfc !=51&&!_egbg {_fbd ,_ede :=_de .NewHeader (_bab ,_bab .InputStream ,_egbd ,_bab .OrganizationType );if _ede !=nil {return _bb .Wrap (_ede ,_cgaa ,"");};_ff .Log .Trace ("\u0044\u0065c\u006f\u0064\u0069\u006eg\u0020\u0073e\u0067\u006d\u0065\u006e\u0074\u0020\u006e\u0075m\u0062\u0065\u0072\u003a\u0020\u0025\u0064\u002c\u0020\u0054\u0079\u0070e\u003a\u0020\u0025\u0073",_fbd .SegmentNumber ,_fbd .Type );_gfc =_fbd .Type ;if _gfc !=_de .TEndOfFile {if _fbd .PageAssociation !=0{_fad =_bab .Pages [_fbd .PageAssociation ];if _fad ==nil {_fad =_ggfa (_bab ,_fbd .PageAssociation );_bab .Pages [_fbd .PageAssociation ]=_fad ;if _bab .NumberOfPagesUnknown {_bab .NumberOfPages ++;};};_fad .Segments =append (_fad .Segments ,_fbd );}else {_bab .GlobalSegments .AddSegment (_fbd );};};_bfg =append (_bfg ,_fbd );_egbd =_bab .InputStream .StreamPosition ();if _bab .OrganizationType ==_de .OSequential {_egbd +=int64 (_fbd .SegmentDataLength );};_egbg ,_ede =_bab .reachedEOF (_egbd );if _ede !=nil {_ff .Log .Debug ("\u006a\u0062\u0069\u0067\u0032 \u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0072\u0065\u0061\u0063h\u0065\u0064\u0020\u0045\u004f\u0046\u0020\u0077\u0069\u0074\u0068\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_ede );return _bb .Wrap (_ede ,_cgaa ,"");};};_bab .determineRandomDataOffsets (_bfg ,uint64 (_egbd ));return nil ;};func (_dfd *Page )GetSegment (number int )(*_de .Header ,error ){const _cdf ="\u0050a\u0067e\u002e\u0047\u0065\u0074\u0053\u0065\u0067\u006d\u0065\u006e\u0074";for _ ,_fgec :=range _dfd .Segments {if _fgec .SegmentNumber ==uint32 (number ){return _fgec ,nil ;};};_ddf :=make ([]uint32 ,len (_dfd .Segments ));for _gea ,_gdb :=range _dfd .Segments {_ddf [_gea ]=_gdb .SegmentNumber ;};return nil ,_bb .Errorf (_cdf ,"\u0073e\u0067\u006d\u0065n\u0074\u0020\u0077i\u0074h \u006e\u0075\u006d\u0062\u0065\u0072\u003a \u0027\u0025\u0064\u0027\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0069\u006e\u0020\u0074\u0068\u0065\u0020\u0070\u0061\u0067\u0065\u003a\u0020'%\u0064'\u002e\u0020\u004b\u006e\u006f\u0077n\u0020\u0073\u0065\u0067\u006de\u006e\u0074\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0073\u003a \u0025\u0076",number ,_dfd .PageNumber ,_ddf );};const (GenericEM EncodingMethod =iota ;CorrelationEM ;RankHausEM ;);func (_bbfd *Globals )AddSegment (segment *_de .Header ){_bbfd .Segments =append (_bbfd .Segments ,segment );};func (_dfagb *Page )lastSegmentNumber ()(_dbe uint32 ,_agadb error ){const _dedb ="\u006c\u0061\u0073\u0074\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u004eu\u006d\u0062\u0065\u0072";if len (_dfagb .Segments )==0{return _dbe ,_bb .Errorf (_dedb ,"\u006e\u006f\u0020se\u0067\u006d\u0065\u006e\u0074\u0073\u0020\u0066\u006fu\u006ed\u0020i\u006e \u0074\u0068\u0065\u0020\u0070\u0061\u0067\u0065\u0020\u0027\u0025\u0064\u0027",_dfagb .PageNumber );};return _dfagb .Segments [len (_dfagb .Segments )-1].SegmentNumber ,nil ;};func (_ecac *Page )getCombinationOperator (_egcf *_de .PageInformationSegment ,_ceb _eg .CombinationOperator )_eg .CombinationOperator {if _egcf .CombinationOperatorOverrideAllowed (){return _ceb ;};return _egcf .CombinationOperator ();};func InitEncodeDocument (fullHeaders bool )*Document {return &Document {FullHeaders :fullHeaders ,_da :_g .BufferedMSB (),Pages :map[int ]*Page {},_cc :map[int ][]int {},_ffa :map[int ]int {},_ec :map[int ][]int {}};};var _fd =[]byte {0x97,0x4A,0x42,0x32,0x0D,0x0A,0x1A,0x0A};func (_baba *Page )getHeight ()(int ,error ){const _add ="\u0067e\u0074\u0048\u0065\u0069\u0067\u0068t";if _baba .FinalHeight !=0{return _baba .FinalHeight ,nil ;};_ded :=_baba .getPageInformationSegment ();if _ded ==nil {return 0,_bb .Error (_add ,"n\u0069l\u0020\u0070\u0061\u0067\u0065\u0020\u0069\u006ef\u006f\u0072\u006d\u0061ti\u006f\u006e");};_gaec ,_fgbc :=_ded .GetSegmentData ();if _fgbc !=nil {return 0,_bb .Wrap (_fgbc ,_add ,"");};_cbc ,_eaca :=_gaec .(*_de .PageInformationSegment );if !_eaca {return 0,_bb .Errorf (_add ,"\u0070\u0061\u0067\u0065\u0020\u0069n\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0069\u0073 \u006f\u0066\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070e\u003a \u0027\u0025\u0054\u0027",_gaec );};if _cbc .PageBMHeight ==_f .MaxInt32 {_ ,_fgbc =_baba .GetBitmap ();if _fgbc !=nil {return 0,_bb .Wrap (_fgbc ,_add ,"");};}else {_baba .FinalHeight =_cbc .PageBMHeight ;};return _baba .FinalHeight ,nil ;};func (_agd *Document )nextPageNumber ()uint32 {_agd .NumberOfPages ++;return _agd .NumberOfPages };func (_afcb *Page )getWidth ()(int ,error ){const _gaae ="\u0067\u0065\u0074\u0057\u0069\u0064\u0074\u0068";if _afcb .FinalWidth !=0{return _afcb .FinalWidth ,nil ;};_cbe :=_afcb .getPageInformationSegment ();if _cbe ==nil {return 0,_bb .Error (_gaae ,"n\u0069l\u0020\u0070\u0061\u0067\u0065\u0020\u0069\u006ef\u006f\u0072\u006d\u0061ti\u006f\u006e");};_fbec ,_fbdc :=_cbe .GetSegmentData ();if _fbdc !=nil {return 0,_bb .Wrap (_fbdc ,_gaae ,"");};_ccd ,_fdg :=_fbec .(*_de .PageInformationSegment );if !_fdg {return 0,_bb .Errorf (_gaae ,"\u0070\u0061\u0067\u0065\u0020\u0069n\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0069\u0073 \u006f\u0066\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070e\u003a \u0027\u0025\u0054\u0027",_fbec );};_afcb .FinalWidth =_ccd .PageBMWidth ;return _afcb .FinalWidth ,nil ;};func (_aae *Document )isFileHeaderPresent ()(bool ,error ){_aae .InputStream .Mark ();for _ ,_daaf :=range _fd {_aaf ,_eacc :=_aae .InputStream .ReadByte ();if _eacc !=nil {return false ,_eacc ;};if _daaf !=_aaf {_aae .InputStream .Reset ();return false ,nil ;};};_aae .InputStream .Reset ();return true ,nil ;};func (_ebb *Globals )GetSymbolDictionary ()(*_de .Header ,error ){const _dcfe ="G\u006c\u006f\u0062\u0061\u006c\u0073.\u0047\u0065\u0074\u0053\u0079\u006d\u0062\u006f\u006cD\u0069\u0063\u0074i\u006fn\u0061\u0072\u0079";if _ebb ==nil {return nil ,_bb .Error (_dcfe ,"\u0067\u006c\u006f\u0062al\u0073\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064");};if len (_ebb .Segments )==0{return nil ,_bb .Error (_dcfe ,"\u0067\u006c\u006f\u0062\u0061\u006c\u0073\u0020\u0061\u0072\u0065\u0020e\u006d\u0070\u0074\u0079");};for _ ,_gbf :=range _ebb .Segments {if _gbf .Type ==_de .TSymbolDictionary {return _gbf ,nil ;};};return nil ,_bb .Error (_dcfe ,"\u0067\u006c\u006fba\u006c\u0020\u0073\u0079\u006d\u0062\u006f\u006c\u0020d\u0069c\u0074i\u006fn\u0061\u0072\u0079\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func _ee (_eaf int )int {_fdc :=0;_daa :=(_eaf &(_eaf -1))==0;_eaf >>=1;for ;_eaf !=0;_eaf >>=1{_fdc ++;};if _daa {return _fdc ;};return _fdc +1;};func (_cge *Page )addTextRegionSegment (_gfa []*_de .Header ,_ddd ,_dgec map[int ]int ,_ggf []int ,_cgg *_eg .Points ,_dceg *_eg .Bitmaps ,_edf *_b .IntSlice ,_bge *_eg .Boxes ,_fegg ,_bdg int ){_agb :=&_de .TextRegion {NumberOfSymbols :uint32 (_bdg )};_agb .InitEncode (_ddd ,_dgec ,_ggf ,_cgg ,_dceg ,_edf ,_bge ,_cge .FinalWidth ,_cge .FinalHeight ,_fegg );_bdgc :=&_de .Header {RTSegments :_gfa ,SegmentData :_agb ,PageAssociation :_cge .PageNumber ,Type :_de .TImmediateTextRegion };_cce :=_de .TPageInformation ;if _dgec !=nil {_cce =_de .TSymbolDictionary ;};var _ega int ;for ;_ega < len (_cge .Segments );_ega ++{if _cge .Segments [_ega ].Type ==_cce {_ega ++;break ;};};_cge .Segments =append (_cge .Segments ,nil );copy (_cge .Segments [_ega +1:],_cge .Segments [_ega :]);_cge .Segments [_ega ]=_bdgc ;};func (_egf *Document )encodeSegment (_ddgc *_de .Header ,_fbe *int )error {const _aa ="\u0065\u006e\u0063\u006f\u0064\u0065\u0053\u0065\u0067\u006d\u0065\u006e\u0074";_ddgc .SegmentNumber =_egf .nextSegmentNumber ();_gef ,_fgb :=_ddgc .Encode (_egf ._da );if _fgb !=nil {return _bb .Wrapf (_fgb ,_aa ,"\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u003a\u0020\u0027\u0025\u0064\u0027",_ddgc .SegmentNumber );};*_fbe +=_gef ;return nil ;};func (_ddec *Page )fitsPage (_adfb *_de .PageInformationSegment ,_bcg *_eg .Bitmap )bool {return _ddec .countRegions ()==1&&_adfb .DefaultPixelValue ()==0&&_adfb .PageBMWidth ==_bcg .Width &&_adfb .PageBMHeight ==_bcg .Height ;};type Document struct{Pages map[int ]*Page ;NumberOfPagesUnknown bool ;NumberOfPages uint32 ;GBUseExtTemplate bool ;InputStream _g .StreamReader ;GlobalSegments *Globals ;OrganizationType _de .OrganizationType ;Classer *_d .Classer ;XRes ,YRes int ;FullHeaders bool ;CurrentSegmentNumber uint32 ;AverageTemplates *_eg .Bitmaps ;BaseIndexes []int ;Refinement bool ;RefineLevel int ;_c uint8 ;_da *_g .BufferedWriter ;EncodeGlobals bool ;_fa int ;_cc map[int ][]int ;_ec map[int ][]int ;_cd []int ;_ffa map[int ]int ;};func (_cgdg *Page )nextSegmentNumber ()uint32 {return _cgdg .Document .nextSegmentNumber ()};func (_edb *Page )AddEndOfPageSegment (){_gcf :=&_de .Header {Type :_de .TEndOfPage ,PageAssociation :_edb .PageNumber };_edb .Segments =append (_edb .Segments ,_gcf );};type Globals struct{Segments []*_de .Header ;};func (_fcf *Page )GetBitmap ()(_abeg *_eg .Bitmap ,_bgf error ){_ff .Log .Trace (_a .Sprintf ("\u005b\u0050\u0041G\u0045\u005d\u005b\u0023%\u0064\u005d\u0020\u0047\u0065\u0074\u0042i\u0074\u006d\u0061\u0070\u0020\u0062\u0065\u0067\u0069\u006e\u0073\u002e\u002e\u002e",_fcf .PageNumber ));defer func (){if _bgf !=nil {_ff .Log .Trace (_a .Sprintf ("\u005b\u0050\u0041\u0047\u0045\u005d\u005b\u0023\u0025\u0064\u005d\u0020\u0047\u0065\u0074B\u0069t\u006d\u0061\u0070\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0025\u0076",_fcf .PageNumber ,_bgf ));}else {_ff .Log .Trace (_a .Sprintf ("\u005b\u0050\u0041\u0047\u0045\u005d\u005b\u0023\u0025\u0064]\u0020\u0047\u0065\u0074\u0042\u0069\u0074m\u0061\u0070\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064",_fcf .PageNumber ));};}();if _fcf .Bitmap !=nil {return _fcf .Bitmap ,nil ;};_bgf =_fcf .composePageBitmap ();if _bgf !=nil {return nil ,_bgf ;};return _fcf .Bitmap ,nil ;};func _eadc (_cdb _g .StreamReader ,_fge *Globals )(*Document ,error ){_eff :=&Document {Pages :make (map[int ]*Page ),InputStream :_cdb ,OrganizationType :_de .OSequential ,NumberOfPagesUnknown :true ,GlobalSegments :_fge ,_c :9};if _eff .GlobalSegments ==nil {_eff .GlobalSegments =&Globals {};};if _agdg :=_eff .mapData ();_agdg !=nil {return nil ,_agdg ;};return _eff ,nil ;};func (_dfg *Page )getResolutionY ()(int ,error ){const _eeae ="\u0067\u0065\u0074\u0052\u0065\u0073\u006f\u006c\u0075t\u0069\u006f\u006e\u0059";if _dfg .ResolutionY !=0{return _dfg .ResolutionY ,nil ;};_ddgg :=_dfg .getPageInformationSegment ();if _ddgg ==nil {return 0,_bb .Error (_eeae ,"n\u0069l\u0020\u0070\u0061\u0067\u0065\u0020\u0069\u006ef\u006f\u0072\u006d\u0061ti\u006f\u006e");};_bcgb ,_cacbc :=_ddgg .GetSegmentData ();if _cacbc !=nil {return 0,_bb .Wrap (_cacbc ,_eeae ,"");};_bgcf ,_geb :=_bcgb .(*_de .PageInformationSegment );if !_geb {return 0,_bb .Errorf (_eeae ,"\u0070\u0061\u0067\u0065\u0020\u0069\u006e\u0066o\u0072\u006d\u0061ti\u006f\u006e\u0020\u0073\u0065\u0067m\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006f\u0066\u0020\u0069\u006e\u0076\u0061\u006ci\u0064\u0020\u0074\u0079\u0070\u0065\u003a\u0027%\u0054\u0027",_bcgb );};_dfg .ResolutionY =_bgcf .ResolutionY ;return _dfg .ResolutionY ,nil ;};func (_eee *Page )GetWidth ()(int ,error ){return _eee .getWidth ()};func (_db *Document )addSymbolDictionary (_fgd int ,_ef *_eg .Bitmaps ,_dec []int ,_bd map[int ]int ,_bfa bool )(*_de .Header ,error ){const _ebae ="\u0061\u0064\u0064\u0053ym\u0062\u006f\u006c\u0044\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079";_fga :=&_de .SymbolDictionary {};if _eda :=_fga .InitEncode (_ef ,_dec ,_bd ,_bfa );_eda !=nil {return nil ,_eda ;};_ag :=&_de .Header {Type :_de .TSymbolDictionary ,PageAssociation :_fgd ,SegmentData :_fga };if _fgd ==0{if _db .GlobalSegments ==nil {_db .GlobalSegments =&Globals {};};_db .GlobalSegments .AddSegment (_ag );return _ag ,nil ;};_cg ,_bfac :=_db .Pages [_fgd ];if !_bfac {return nil ,_bb .Errorf (_ebae ,"p\u0061g\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020n\u006f\u0074\u0020\u0066ou\u006e\u0064",_fgd );};var (_fff int ;_fec *_de .Header ;);for _fff ,_fec =range _cg .Segments {if _fec .Type ==_de .TPageInformation {break ;};};_fff ++;_cg .Segments =append (_cg .Segments ,nil );copy (_cg .Segments [_fff +1:],_cg .Segments [_fff :]);_cg .Segments [_fff ]=_ag ;return _ag ,nil ;};func (_ebac *Document )GetNumberOfPages ()(uint32 ,error ){if _ebac .NumberOfPagesUnknown ||_ebac .NumberOfPages ==0{if len (_ebac .Pages )==0{if _ada :=_ebac .mapData ();_ada !=nil {return 0,_bb .Wrap (_ada ,"\u0044o\u0063\u0075\u006d\u0065n\u0074\u002e\u0047\u0065\u0074N\u0075m\u0062e\u0072\u004f\u0066\u0050\u0061\u0067\u0065s","");};};return uint32 (len (_ebac .Pages )),nil ;};return _ebac .NumberOfPages ,nil ;};func (_egcg *Document )encodeFileHeader (_bfd _g .BinaryWriter )(_gbef int ,_aab error ){const _debb ="\u0065\u006ec\u006f\u0064\u0065F\u0069\u006c\u0065\u0048\u0065\u0061\u0064\u0065\u0072";_gbef ,_aab =_bfd .Write (_fd );if _aab !=nil {return _gbef ,_bb .Wrap (_aab ,_debb ,"\u0069\u0064");};if _aab =_bfd .WriteByte (0x01);_aab !=nil {return _gbef ,_bb .Wrap (_aab ,_debb ,"\u0066\u006c\u0061g\u0073");};_gbef ++;_fgf :=make ([]byte ,4);_ea .BigEndian .PutUint32 (_fgf ,_egcg .NumberOfPages );_ddc ,_aab :=_bfd .Write (_fgf );if _aab !=nil {return _ddc ,_bb .Wrap (_aab ,_debb ,"p\u0061\u0067\u0065\u0020\u006e\u0075\u006d\u0062\u0065\u0072");};_gbef +=_ddc ;return _gbef ,nil ;};func (_fg *Document )produceClassifiedPage (_bbf *Page ,_gab *_de .Header )(_dcf error ){const _ce ="p\u0072\u006f\u0064\u0075ce\u0043l\u0061\u0073\u0073\u0069\u0066i\u0065\u0064\u0050\u0061\u0067\u0065";var _ead map[int ]int ;_bfb :=_fg ._fa ;_ab :=[]*_de .Header {_gab };if len (_fg ._cc [_bbf .PageNumber ])> 0{_ead =map[int ]int {};_afg ,_dd :=_fg .addSymbolDictionary (_bbf .PageNumber ,_fg .Classer .UndilatedTemplates ,_fg ._cc [_bbf .PageNumber ],_ead ,false );if _dd !=nil {return _bb .Wrap (_dd ,_ce ,"");};_ab =append (_ab ,_afg );_bfb +=len (_fg ._cc [_bbf .PageNumber ]);};_ebc :=_fg ._ec [_bbf .PageNumber ];_ff .Log .Debug ("P\u0061g\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020c\u006f\u006d\u0070\u0073: \u0025\u0076",_bbf .PageNumber ,_ebc );_bbf .addTextRegionSegment (_ab ,_fg ._ffa ,_ead ,_fg ._ec [_bbf .PageNumber ],_fg .Classer .PtaLL ,_fg .Classer .UndilatedTemplates ,_fg .Classer .ClassIDs ,nil ,_ee (_bfb ),len (_fg ._ec [_bbf .PageNumber ]));return nil ;};func (_gefc *Page )composePageBitmap ()error {const _ffd ="\u0063\u006f\u006d\u0070\u006f\u0073\u0065\u0050\u0061\u0067\u0065\u0042i\u0074\u006d\u0061\u0070";if _gefc .PageNumber ==0{return nil ;};_ae :=_gefc .getPageInformationSegment ();if _ae ==nil {return _bb .Error (_ffd ,"\u0070\u0061\u0067e \u0069\u006e\u0066\u006f\u0072\u006d\u0061\u0074\u0069o\u006e \u0073e\u0067m\u0065\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};_cbf ,_fgc :=_ae .GetSegmentData ();if _fgc !=nil {return _fgc ;};_ebca ,_gcb :=_cbf .(*_de .PageInformationSegment );if !_gcb {return _bb .Error (_ffd ,"\u0070\u0061\u0067\u0065\u0020\u0069\u006ef\u006f\u0072\u006da\u0074\u0069\u006f\u006e \u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006f\u0066\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065");};if _fgc =_gefc .createPage (_ebca );_fgc !=nil {return _bb .Wrap (_fgc ,_ffd ,"");};_gefc .clearSegmentData ();return nil ;};func (_cag *Page )AddGenericRegion (bm *_eg .Bitmap ,xloc ,yloc ,template int ,tp _de .Type ,duplicateLineRemoval bool )error {const _fgea ="P\u0061\u0067\u0065\u002eAd\u0064G\u0065\u006e\u0065\u0072\u0069c\u0052\u0065\u0067\u0069\u006f\u006e";_dfag :=&_de .GenericRegion {};if _cgf :=_dfag .InitEncode (bm ,xloc ,yloc ,template ,duplicateLineRemoval );_cgf !=nil {return _bb .Wrap (_cgf ,_fgea ,"");};_bcb :=&_de .Header {Type :_de .TImmediateGenericRegion ,PageAssociation :_cag .PageNumber ,SegmentData :_dfag };_cag .Segments =append (_cag .Segments ,_bcb );return nil ;};func (_afc *Page )AddPageInformationSegment (){_caf :=&_de .PageInformationSegment {PageBMWidth :_afc .FinalWidth ,PageBMHeight :_afc .FinalHeight ,ResolutionX :_afc .ResolutionX ,ResolutionY :_afc .ResolutionY ,IsLossless :_afc .IsLossless };_ebce :=&_de .Header {PageAssociation :_afc .PageNumber ,SegmentDataLength :uint64 (_caf .Size ()),SegmentData :_caf ,Type :_de .TPageInformation };_afc .Segments =append (_afc .Segments ,_ebce );};func (_ffc *Document )determineRandomDataOffsets (_egb []*_de .Header ,_bbc uint64 ){if _ffc .OrganizationType !=_de .ORandom {return ;};for _ ,_fab :=range _egb {_fab .SegmentDataStartOffset =_bbc ;_bbc +=_fab .SegmentDataLength ;};};func (_agf *Page )Encode (w _g .BinaryWriter )(_eggc int ,_aafa error ){const _adg ="P\u0061\u0067\u0065\u002e\u0045\u006e\u0063\u006f\u0064\u0065";var _gfd int ;for _ ,_abe :=range _agf .Segments {if _gfd ,_aafa =_abe .Encode (w );_aafa !=nil {return _eggc ,_bb .Wrap (_aafa ,_adg ,"");};_eggc +=_gfd ;};return _eggc ,nil ;};func (_ba *Document )produceClassifiedPages ()(_ed error ){const _bbe ="\u0070\u0072\u006f\u0064uc\u0065\u0043\u006c\u0061\u0073\u0073\u0069\u0066\u0069\u0065\u0064\u0050\u0061\u0067e\u0073";if _ba .Classer ==nil {return nil ;};var (_bba *Page ;_bc bool ;_ege *_de .Header ;);for _debf :=1;_debf <=int (_ba .NumberOfPages );_debf ++{if _bba ,_bc =_ba .Pages [_debf ];!_bc {return _bb .Errorf (_bbe ,"p\u0061g\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020n\u006f\u0074\u0020\u0066ou\u006e\u0064",_debf );};if _bba .EncodingMethod ==GenericEM {continue ;};if _ege ==nil {if _ege ,_ed =_ba .GlobalSegments .GetSymbolDictionary ();_ed !=nil {return _bb .Wrap (_ed ,_bbe ,"");};};if _ed =_ba .produceClassifiedPage (_bba ,_ege );_ed !=nil {return _bb .Wrapf (_ed ,_bbe ,"\u0070\u0061\u0067\u0065\u003a\u0020\u0027\u0025\u0064\u0027",_debf );};};return nil ;};func DecodeDocument (input _g .StreamReader ,globals *Globals )(*Document ,error ){return _eadc (input ,globals );};func (_feg *Globals )GetSegment (segmentNumber int )(*_de .Header ,error ){const _gad ="\u0047l\u006fb\u0061\u006c\u0073\u002e\u0047e\u0074\u0053e\u0067\u006d\u0065\u006e\u0074";if _feg ==nil {return nil ,_bb .Error (_gad ,"\u0067\u006c\u006f\u0062al\u0073\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064");};if len (_feg .Segments )==0{return nil ,_bb .Error (_gad ,"\u0067\u006c\u006f\u0062\u0061\u006c\u0073\u0020\u0061\u0072\u0065\u0020e\u006d\u0070\u0074\u0079");};var _daff *_de .Header ;for _ ,_daff =range _feg .Segments {if _daff .SegmentNumber ==uint32 (segmentNumber ){break ;};};if _daff ==nil {return nil ,_bb .Error (_gad ,"\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};return _daff ,nil ;};func (_ge *Document )AddClassifiedPage (bm *_eg .Bitmap ,method _d .Method )(_bf error ){const _deb ="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u002e\u0041\u0064d\u0043\u006c\u0061\u0073\u0073\u0069\u0066\u0069\u0065\u0064P\u0061\u0067\u0065";if !_ge .FullHeaders &&_ge .NumberOfPages !=0{return _bb .Error (_deb ,"\u0064\u006f\u0063\u0075\u006de\u006e\u0074\u0020\u0061\u006c\u0072\u0065a\u0064\u0079\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0073\u0020\u0070\u0061\u0067\u0065\u002e\u0020\u0046\u0069\u006c\u0065\u004d\u006f\u0064\u0065\u0020\u0064\u0069\u0073\u0061\u006c\u006c\u006f\u0077\u0073\u0020\u0061\u0064\u0064i\u006e\u0067\u0020\u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e \u006f\u006e\u0065\u0020\u0070\u0061g\u0065");};if _ge .Classer ==nil {if _ge .Classer ,_bf =_d .Init (_d .DefaultSettings ());_bf !=nil {return _bb .Wrap (_bf ,_deb ,"");};};_ca :=int (_ge .nextPageNumber ());_fb :=&Page {Segments :[]*_de .Header {},Bitmap :bm ,Document :_ge ,FinalHeight :bm .Height ,FinalWidth :bm .Width ,PageNumber :_ca };_ge .Pages [_ca ]=_fb ;switch method {case _d .RankHaus :_fb .EncodingMethod =RankHausEM ;case _d .Correlation :_fb .EncodingMethod =CorrelationEM ;};_fb .AddPageInformationSegment ();if _bf =_ge .Classer .AddPage (bm ,_ca ,method );_bf !=nil {return _bb .Wrap (_bf ,_deb ,"");};if _ge .FullHeaders {_fb .AddEndOfPageSegment ();};return nil ;};func (_gaf *Page )String ()string {return _a .Sprintf ("\u0050\u0061\u0067\u0065\u0020\u0023\u0025\u0064",_gaf .PageNumber );};func (_fdce *Page )countRegions ()int {var _fca int ;for _ ,_eacb :=range _fdce .Segments {switch _eacb .Type {case 6,7,22,23,38,39,42,43:_fca ++;};};return _fca ;};func (_ffb *Page )getPageInformationSegment ()*_de .Header {for _ ,_fed :=range _ffb .Segments {if _fed .Type ==_de .TPageInformation {return _fed ;};};_ff .Log .Debug ("\u0050\u0061\u0067\u0065\u0020\u0069\u006e\u0066o\u0072\u006d\u0061ti\u006f\u006e\u0020\u0073\u0065\u0067m\u0065\u006e\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0066o\u0072\u0020\u0070\u0061\u0067\u0065\u003a\u0020%\u0073\u002e",_ffb );return nil ;};type EncodingMethod int ;func (_cba *Document )GetGlobalSegment (i int )(*_de .Header ,error ){_gaa ,_bbab :=_cba .GlobalSegments .GetSegment (i );if _bbab !=nil {return nil ,_bb .Wrap (_bbab ,"\u0047\u0065t\u0047\u006c\u006fb\u0061\u006c\u0053\u0065\u0067\u006d\u0065\u006e\u0074","");};return _gaa ,nil ;};func (_agad *Page )clearSegmentData (){for _acd :=range _agad .Segments {_agad .Segments [_acd ].CleanSegmentData ();};};func (_fc *Document )encodeEOFHeader (_gae _g .BinaryWriter )(_fcc int ,_fea error ){_eab :=&_de .Header {SegmentNumber :_fc .nextSegmentNumber (),Type :_de .TEndOfFile };if _fcc ,_fea =_eab .Encode (_gae );_fea !=nil {return 0,_bb .Wrap (_fea ,"\u0065n\u0063o\u0064\u0065\u0045\u004f\u0046\u0048\u0065\u0061\u0064\u0065\u0072","");};return _fcc ,nil ;};func (_cbb *Globals )GetSegmentByIndex (index int )(*_de .Header ,error ){const _dfa ="\u0047l\u006f\u0062\u0061\u006cs\u002e\u0047\u0065\u0074\u0053e\u0067m\u0065n\u0074\u0042\u0079\u0049\u006e\u0064\u0065x";if _cbb ==nil {return nil ,_bb .Error (_dfa ,"\u0067\u006c\u006f\u0062al\u0073\u0020\u006e\u006f\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064");};if len (_cbb .Segments )==0{return nil ,_bb .Error (_dfa ,"\u0067\u006c\u006f\u0062\u0061\u006c\u0073\u0020\u0061\u0072\u0065\u0020e\u006d\u0070\u0074\u0079");};if index > len (_cbb .Segments )-1{return nil ,_bb .Error (_dfa ,"\u0069n\u0064e\u0078\u0020\u006f\u0075\u0074 \u006f\u0066 \u0072\u0061\u006e\u0067\u0065");};return _cbb .Segments [index ],nil ;};func (_df *Document )parseFileHeader ()error {const _fccd ="\u0070a\u0072s\u0065\u0046\u0069\u006c\u0065\u0048\u0065\u0061\u0064\u0065\u0072";_ ,_gfe :=_df .InputStream .Seek (8,_af .SeekStart );if _gfe !=nil {return _bb .Wrap (_gfe ,_fccd ,"\u0069\u0064");};_ ,_gfe =_df .InputStream .ReadBits (5);if _gfe !=nil {return _bb .Wrap (_gfe ,_fccd ,"\u0072\u0065\u0073\u0065\u0072\u0076\u0065\u0064\u0020\u0062\u0069\u0074\u0073");};_dfc ,_gfe :=_df .InputStream .ReadBit ();if _gfe !=nil {return _bb .Wrap (_gfe ,_fccd ,"\u0065x\u0074e\u006e\u0064\u0065\u0064\u0020t\u0065\u006dp\u006c\u0061\u0074\u0065\u0073");};if _dfc ==1{_df .GBUseExtTemplate =true ;};_dfc ,_gfe =_df .InputStream .ReadBit ();if _gfe !=nil {return _bb .Wrap (_gfe ,_fccd ,"\u0075\u006e\u006b\u006eow\u006e\u0020\u0070\u0061\u0067\u0065\u0020\u006e\u0075\u006d\u0062\u0065\u0072");};if _dfc !=1{_df .NumberOfPagesUnknown =false ;};_dfc ,_gfe =_df .InputStream .ReadBit ();if _gfe !=nil {return _bb .Wrap (_gfe ,_fccd ,"\u006f\u0072\u0067\u0061\u006e\u0069\u007a\u0061\u0074\u0069\u006f\u006e \u0074\u0079\u0070\u0065");};_df .OrganizationType =_de .OrganizationType (_dfc );if !_df .NumberOfPagesUnknown {_df .NumberOfPages ,_gfe =_df .InputStream .ReadUint32 ();if _gfe !=nil {return _bb .Wrap (_gfe ,_fccd ,"\u006eu\u006db\u0065\u0072\u0020\u006f\u0066\u0020\u0070\u0061\u0067\u0065\u0073");};_df ._c =13;};return nil ;};func (_daf *Document )AddGenericPage (bm *_eg .Bitmap ,duplicateLineRemoval bool )(_cf error ){const _gg ="\u0044\u006f\u0063um\u0065\u006e\u0074\u002e\u0041\u0064\u0064\u0047\u0065\u006e\u0065\u0072\u0069\u0063\u0050\u0061\u0067\u0065";if !_daf .FullHeaders &&_daf .NumberOfPages !=0{return _bb .Error (_gg ,"\u0064\u006f\u0063\u0075\u006de\u006e\u0074\u0020\u0061\u006c\u0072\u0065a\u0064\u0079\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0073\u0020\u0070\u0061\u0067\u0065\u002e\u0020\u0046\u0069\u006c\u0065\u004d\u006f\u0064\u0065\u0020\u0064\u0069\u0073\u0061\u006c\u006c\u006f\u0077\u0073\u0020\u0061\u0064\u0064i\u006e\u0067\u0020\u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e \u006f\u006e\u0065\u0020\u0070\u0061g\u0065");};_dc :=&Page {Segments :[]*_de .Header {},Bitmap :bm ,Document :_daf ,FinalHeight :bm .Height ,FinalWidth :bm .Width ,IsLossless :true };_dc .PageNumber =int (_daf .nextPageNumber ());_daf .Pages [_dc .PageNumber ]=_dc ;_dc .AddPageInformationSegment ();if _cf =_dc .AddGenericRegion (bm ,0,0,0,_de .TImmediateGenericRegion ,duplicateLineRemoval );_cf !=nil {return _bb .Wrap (_cf ,_gg ,"");};if _daf .FullHeaders {_dc .AddEndOfPageSegment ();};return nil ;};func (_cac *Page )GetResolutionY ()(int ,error ){return _cac .getResolutionY ()};func (_aba *Document )Encode ()(_acg []byte ,_gf error ){const _ecc ="\u0044o\u0063u\u006d\u0065\u006e\u0074\u002e\u0045\u006e\u0063\u006f\u0064\u0065";var _efb ,_bce int ;if _aba .FullHeaders {if _efb ,_gf =_aba .encodeFileHeader (_aba ._da );_gf !=nil {return nil ,_bb .Wrap (_gf ,_ecc ,"");};};var (_efba bool ;_cea *_de .Header ;_gfg *Page ;);if _gf =_aba .completeClassifiedPages ();_gf !=nil {return nil ,_bb .Wrap (_gf ,_ecc ,"");};if _gf =_aba .produceClassifiedPages ();_gf !=nil {return nil ,_bb .Wrap (_gf ,_ecc ,"");};if _aba .GlobalSegments !=nil {for _ ,_cea =range _aba .GlobalSegments .Segments {if _gf =_aba .encodeSegment (_cea ,&_efb );_gf !=nil {return nil ,_bb .Wrap (_gf ,_ecc ,"");};};};for _cb :=1;_cb <=int (_aba .NumberOfPages );_cb ++{if _gfg ,_efba =_aba .Pages [_cb ];!_efba {return nil ,_bb .Errorf (_ecc ,"p\u0061g\u0065\u003a\u0020\u0027\u0025\u0064\u0027\u0020n\u006f\u0074\u0020\u0066ou\u006e\u0064",_cb );};for _ ,_cea =range _gfg .Segments {if _gf =_aba .encodeSegment (_cea ,&_efb );_gf !=nil {return nil ,_bb .Wrap (_gf ,_ecc ,"");};};};if _aba .FullHeaders {if _bce ,_gf =_aba .encodeEOFHeader (_aba ._da );_gf !=nil {return nil ,_bb .Wrap (_gf ,_ecc ,"");};_efb +=_bce ;};_acg =_aba ._da .Data ();if len (_acg )!=_efb {_ff .Log .Debug ("\u0042\u0079\u0074\u0065\u0073 \u0077\u0072\u0069\u0074\u0074\u0065\u006e \u0028\u006e\u0029\u003a\u0020\u0027\u0025\u0064\u0027\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0065\u0071\u0075\u0061\u006c\u0020\u0074\u006f\u0020\u0074\u0068\u0065\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u0020\u006f\u0066\u0020t\u0068\u0065\u0020\u0064\u0061\u0074\u0061\u0020\u0065\u006e\u0063\u006fd\u0065\u0064\u003a\u0020\u0027\u0025d\u0027",_efb ,len (_acg ));};return _acg ,nil ;};func (_aad *Document )nextSegmentNumber ()uint32 {_bde :=_aad .CurrentSegmentNumber ;_aad .CurrentSegmentNumber ++;return _bde ;};func (_gefg *Page )createNormalPage (_fecg *_de .PageInformationSegment )error {const _cdfe ="\u0063\u0072e\u0061\u0074\u0065N\u006f\u0072\u006d\u0061\u006c\u0050\u0061\u0067\u0065";_gefg .Bitmap =_eg .New (_fecg .PageBMWidth ,_fecg .PageBMHeight );if _fecg .DefaultPixelValue ()!=0{_gefg .Bitmap .SetDefaultPixel ();};for _ ,_dafd :=range _gefg .Segments {switch _dafd .Type {case 6,7,22,23,38,39,42,43:_ff .Log .Trace ("\u0047\u0065\u0074\u0074in\u0067\u0020\u0053\u0065\u0067\u006d\u0065\u006e\u0074\u003a\u0020\u0025\u0064",_dafd .SegmentNumber );_fabc ,_aec :=_dafd .GetSegmentData ();if _aec !=nil {return _aec ;};_cbg ,_gcg :=_fabc .(_de .Regioner );if !_gcg {_ff .Log .Debug ("\u0053\u0065g\u006d\u0065\u006e\u0074\u003a\u0020\u0025\u0054\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0061\u0020\u0052\u0065\u0067\u0069on\u0065\u0072",_fabc );return _bb .Errorf (_cdfe ,"i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006a\u0062i\u0067\u0032\u0020\u0073\u0065\u0067\u006den\u0074\u0020\u0074\u0079p\u0065\u0020\u002d\u0020\u006e\u006f\u0074\u0020\u0061 R\u0065\u0067i\u006f\u006e\u0065\u0072\u003a\u0020\u0025\u0054",_fabc );};_dba ,_aec :=_cbg .GetRegionBitmap ();if _aec !=nil {return _bb .Wrap (_aec ,_cdfe ,"");};if _gefg .fitsPage (_fecg ,_dba ){_gefg .Bitmap =_dba ;}else {_dcd :=_cbg .GetRegionInfo ();_ffdg :=_gefg .getCombinationOperator (_fecg ,_dcd .CombinaionOperator );_aec =_eg .Blit (_dba ,_gefg .Bitmap ,int (_dcd .XLocation ),int (_dcd .YLocation ),_ffdg );if _aec !=nil {return _bb .Wrap (_aec ,_cdfe ,"");};};};};return nil ;};func (_gfef *Page )GetHeight ()(int ,error ){return _gfef .getHeight ()};func (_daeb *Document )reachedEOF (_bdeb int64 )(bool ,error ){const _eag ="\u0072\u0065\u0061\u0063\u0068\u0065\u0064\u0045\u004f\u0046";_ ,_acb :=_daeb .InputStream .Seek (_bdeb ,_af .SeekStart );if _acb !=nil {_ff .Log .Debug ("\u0072\u0065\u0061c\u0068\u0065\u0064\u0045\u004f\u0046\u0020\u002d\u0020\u0064\u002e\u0049\u006e\u0070\u0075\u0074\u0053\u0074\u0072\u0065\u0061\u006d\u002e\u0053\u0065\u0065\u006b\u0020\u0066a\u0069\u006c\u0065\u0064\u003a\u0020\u0025\u0076",_acb );return false ,_bb .Wrap (_acb ,_eag ,"\u0069n\u0070\u0075\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u0020s\u0065\u0065\u006b\u0020\u0066\u0061\u0069\u006c\u0065\u0064");};_ ,_acb =_daeb .InputStream .ReadBits (32);if _acb ==_af .EOF {return true ,nil ;}else if _acb !=nil {return false ,_bb .Wrap (_acb ,_eag ,"");};return false ,nil ;};func (_cgc *Document )GetPage (pageNumber int )(_de .Pager ,error ){const _eea ="\u0044\u006fc\u0075\u006d\u0065n\u0074\u002e\u0047\u0065\u0074\u0050\u0061\u0067\u0065";if pageNumber < 0{_ff .Log .Debug ("\u004a\u0042\u0049\u00472\u0020\u0050\u0061\u0067\u0065\u0020\u002d\u0020\u0047e\u0074\u0050\u0061\u0067\u0065\u003a\u0020\u0025\u0064\u002e\u0020\u0050\u0061\u0067\u0065\u0020\u0063\u0061n\u006e\u006f\u0074\u0020\u0062e\u0020\u006c\u006f\u0077\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030\u002e\u0020\u0025\u0073",pageNumber ,_fe .Stack ());return nil ,_bb .Errorf (_eea ,"\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006a\u0062\u0069\u0067\u0032\u0020d\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u002d\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065\u0064 \u0069\u006e\u0076\u0061\u006ci\u0064\u0020\u0070\u0061\u0067\u0065\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u003a\u0020\u0025\u0064",pageNumber );};if pageNumber > len (_cgc .Pages ){_ff .Log .Debug ("\u0050\u0061\u0067\u0065 n\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u003a\u0020\u0025\u0064\u002e\u0020%\u0073",pageNumber ,_fe .Stack ());return nil ,_bb .Error (_eea ,"\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006a\u0062\u0069\u0067\u0032 \u0064\u006f\u0063\u0075\u006d\u0065n\u0074\u0020\u002d\u0020\u0070\u0061\u0067\u0065\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_faa ,_cga :=_cgc .Pages [pageNumber ];if !_cga {_ff .Log .Debug ("\u0050\u0061\u0067\u0065 n\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u003a\u0020\u0025\u0064\u002e\u0020%\u0073",pageNumber ,_fe .Stack ());return nil ,_bb .Errorf (_eea ,"\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006a\u0062\u0069\u0067\u0032 \u0064\u006f\u0063\u0075\u006d\u0065n\u0074\u0020\u002d\u0020\u0070\u0061\u0067\u0065\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};return _faa ,nil ;};func (_ggc *Page )createStripedPage (_dff *_de .PageInformationSegment )error {const _cace ="\u0063\u0072\u0065\u0061\u0074\u0065\u0053\u0074\u0072\u0069\u0070\u0065d\u0050\u0061\u0067\u0065";_bgc ,_aga :=_ggc .collectPageStripes ();if _aga !=nil {return _bb .Wrap (_aga ,_cace ,"");};var _ecb int ;for _ ,_gcbb :=range _bgc {if _be ,_ceg :=_gcbb .(*_de .EndOfStripe );_ceg {_ecb =_be .LineNumber ()+1;}else {_fcce :=_gcbb .(_de .Regioner );_fee :=_fcce .GetRegionInfo ();_fef :=_ggc .getCombinationOperator (_dff ,_fee .CombinaionOperator );_bfgc ,_acc :=_fcce .GetRegionBitmap ();if _acc !=nil {return _bb .Wrap (_acc ,_cace ,"");};_acc =_eg .Blit (_bfgc ,_ggc .Bitmap ,int (_fee .XLocation ),_ecb ,_fef );if _acc !=nil {return _bb .Wrap (_acc ,_cace ,"");};};};return nil ;};func (_dde *Page )GetResolutionX ()(int ,error ){return _dde .getResolutionX ()};type Page struct{Segments []*_de .Header ;PageNumber int ;Bitmap *_eg .Bitmap ;FinalHeight int ;FinalWidth int ;ResolutionX int ;ResolutionY int ;IsLossless bool ;Document *Document ;FirstSegmentNumber int ;EncodingMethod EncodingMethod ;};func (_bbcd *Page )getResolutionX ()(int ,error ){const _ced ="\u0067\u0065\u0074\u0052\u0065\u0073\u006f\u006c\u0075t\u0069\u006f\u006e\u0058";if _bbcd .ResolutionX !=0{return _bbcd .ResolutionX ,nil ;};_aafe :=_bbcd .getPageInformationSegment ();if _aafe ==nil {return 0,_bb .Error (_ced ,"n\u0069l\u0020\u0070\u0061\u0067\u0065\u0020\u0069\u006ef\u006f\u0072\u006d\u0061ti\u006f\u006e");};_adc ,_ebag :=_aafe .GetSegmentData ();if _ebag !=nil {return 0,_bb .Wrap (_ebag ,_ced ,"");};_ggg ,_cgd :=_adc .(*_de .PageInformationSegment );if !_cgd {return 0,_bb .Errorf (_ced ,"\u0070\u0061\u0067\u0065\u0020\u0069n\u0066\u006f\u0072\u006d\u0061\u0074\u0069\u006f\u006e\u0020\u0073\u0065\u0067\u006d\u0065\u006e\u0074\u0020\u0069\u0073 \u006f\u0066\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070e\u003a \u0027\u0025\u0054\u0027",_adc );};_bbcd .ResolutionX =_ggg .ResolutionX ;return _bbcd .ResolutionX ,nil ;};func _ggfa (_cfa *Document ,_fdf int )*Page {return &Page {Document :_cfa ,PageNumber :_fdf ,Segments :[]*_de .Header {}};};func (_cacb *Page )createPage (_eaed *_de .PageInformationSegment )error {var _acbc error ;if !_eaed .IsStripe ||_eaed .PageBMHeight !=-1{_acbc =_cacb .createNormalPage (_eaed );}else {_acbc =_cacb .createStripedPage (_eaed );};return _acbc ;};